import{_ as s,o as a,c as e,Q as o}from"./chunks/framework.e1e0b12f.js";const m=JSON.parse('{"title":"静态资源任务","description":"","frontmatter":{},"headers":[],"relativePath":"guide/task-assets.md","filePath":"guide/task-assets.md","lastUpdated":1703734600000}'),n={name:"guide/task-assets.md"},l=o(`<h1 id="assets-task" tabindex="-1">静态资源任务 <a class="header-anchor" href="#assets-task" aria-label="Permalink to &quot;静态资源任务 {#assets-task}&quot;">​</a></h1><p>任务类型为 <code>static</code> 或 <code>image</code> 。</p><p>静态资源包含常见的图像、媒体和字体文件等。如果不想处理这些静态资源文件，你可以将它们放在 <code>public</code> 目录下。</p><h2 id="process-flow" tabindex="-1">任务流程 <a class="header-anchor" href="#process-flow" aria-label="Permalink to &quot;任务流程 {#process-flow}&quot;">​</a></h2><ul><li>自定义处理流程 - 处理 <code>pipflow.config.js</code> 中添加的自定义 <code>plugins</code></li><li>压缩图片 - 基于 <code>imagemin</code> 压缩图片</li><li>生成文件hash及manifest文件</li></ul><h2 id="图片压缩" tabindex="-1">图片压缩 <a class="header-anchor" href="#图片压缩" aria-label="Permalink to &quot;图片压缩&quot;">​</a></h2><p>由于图片压缩是一项耗时的一次性任务，且 <code>gulp-imagemin</code> 插件<strong>安装依赖经常失败</strong>(国内环境)。所以 <code>pipflow</code> 将 压缩图片作为一个可选项。如果你的项目不需要 压缩图片或者手动一次性压缩，请删除项目的 <code>package.json</code> 中的 <code>gulp-imagemin</code> 依赖，并将 <code>imageMinify</code> 配置项的值设置为 <code>false</code>。</p><p>关于图片压缩配置，你可以为所有静态任务统一配置，也可以单独配置某个静态任务。</p><ol><li>统一配置项 <code>build.imageMinify</code> , 具体请看 <a href="./../config/build-options.html#build-imageminify">这里</a>。</li><li>单独任务配置项 <code>minify</code>。</li></ol><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ImageMinifyOptions</span><span style="color:#E1E4E8;"> : boolean </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  plugins</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> ImageMinifyPlugin[]</span></span>
<span class="line"><span style="color:#E1E4E8;">  options</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    verbose?: boolean</span></span>
<span class="line"><span style="color:#E1E4E8;">    silent</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> boolean</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ImageMinifyOptions</span><span style="color:#24292E;"> : boolean </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  plugins</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> ImageMinifyPlugin[]</span></span>
<span class="line"><span style="color:#24292E;">  options</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    verbose?: boolean</span></span>
<span class="line"><span style="color:#24292E;">    silent</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> boolean</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><blockquote><p><code>gulp-imagemin</code> 插件在压缩图片过程中会自动过滤非图片文件。 具体配置请点击 <a href="https://www.npmjs.com/package/gulp-imagemin" target="_blank" rel="noreferrer">这里</a></p></blockquote><div class="warning custom-block"><p class="custom-block-title">🚨 提醒</p><p><code>gulp-imagemin</code> 只能安装 <code>&lt;=7</code> 的版本，<code>8</code>及以上版本仅支持 <code>esModule</code> 模块化.</p></div>`,12),p=[l];function c(t,i,r,d,E,g){return a(),e("div",null,p)}const u=s(n,[["render",c]]);export{m as __pageData,u as default};
