import{_ as s,o as a,c as n,X as l}from"./chunks/framework.d24d905d.js";const A=JSON.parse('{"title":"静态资源","description":"","frontmatter":{},"headers":[],"relativePath":"guide/task-assets.md","filePath":"guide/task-assets.md","lastUpdated":1692943340000}'),o={name:"guide/task-assets.md"},e=l(`<h1 id="静态资源" tabindex="-1">静态资源 <a class="header-anchor" href="#静态资源" aria-label="Permalink to &quot;静态资源&quot;">​</a></h1><h2 id="图片压缩" tabindex="-1">图片压缩 <a class="header-anchor" href="#图片压缩" aria-label="Permalink to &quot;图片压缩&quot;">​</a></h2><p>由于图片压缩是一个耗时任务，且 <code>gulp-imagemin</code> 插件<strong>安装依赖经常失败</strong>(国内环境)。鉴于此会影响整个工程的安装运行，所以 <code>pipflow</code> 并未内置图片压缩功能，如果需要则手动安装依赖并引入插件即可。</p><p><strong>具体步骤如下:</strong></p><ol><li>安装 <code>gulp-imagemin</code> 依赖</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gulp-imagemin@7</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p><p><code>gulp-imagemin</code> 只能安装 <code>&lt;=7</code> 的版本，<code>8</code>及以上版本仅支持 <code>esModule</code> 模块化.</p></div><ol start="2"><li>在 <code>pipflow.config.js</code> 中找到当前任务，并加入以下代码</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> imagemin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gulp-imagemin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">tasks</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">assets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">imagemin</span><span style="color:#A6ACCD;">(</span><span style="color:#676E95;font-style:italic;">/* options */</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">      ]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><blockquote><p><code>gulp-imagemin</code> 插件在压缩图片过程中会自动过滤非图片文件。 请<a href="https://www.npmjs.com/package/gulp-imagemin" target="_blank" rel="noreferrer">点击查看文档</a></p></blockquote>`,10),p=[e];function t(c,r,i,D,C,d){return a(),n("div",null,p)}const m=s(o,[["render",t]]);export{A as __pageData,m as default};
