import{_ as s,o as a,c as n,Q as p}from"./chunks/framework.e1e0b12f.js";const u=JSON.parse('{"title":"script 任务","description":"","frontmatter":{},"headers":[],"relativePath":"guide/task-script.md","filePath":"guide/task-script.md","lastUpdated":1699167417000}'),l={name:"guide/task-script.md"},e=p(`<h1 id="script-任务" tabindex="-1">script 任务 <a class="header-anchor" href="#script-任务" aria-label="Permalink to &quot;script 任务&quot;">​</a></h1><h2 id="process-flow" tabindex="-1">处理流程 <a class="header-anchor" href="#process-flow" aria-label="Permalink to &quot;处理流程 {#process-flow}&quot;">​</a></h2><ul><li>环境变量处理 - 环境变量注入</li><li>别名替换 - 静态替换 <code>alias</code> 对应的字符串</li><li>自定义处理流程 - 处理 <code>pipflow.config.js</code> 中添加的自定义 <code>plugins</code></li><li>babel转译</li><li>压缩混淆 - 基于 <code>terser</code> 压缩混淆</li><li>生成 source map 文件</li><li>生成文件hash - 支持 <code>[name]-[hash]</code> 和 <code>[name]?[hash]</code> 两种方式。</li></ul><h2 id="文件入口" tabindex="-1">文件入口 <a class="header-anchor" href="#文件入口" aria-label="Permalink to &quot;文件入口&quot;">​</a></h2><p>文件入口配置支持 单一字符串，数组，和对象 3 种方式。</p><h3 id="_1-字符串通配符" tabindex="-1">1. 字符串通配符 <a class="header-anchor" href="#_1-字符串通配符" aria-label="Permalink to &quot;1. 字符串通配符&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">input</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;./src/scripts/**/*.{js,mjs}&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">input</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;./src/scripts/**/*.{js,mjs}&#39;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_2-数组方式" tabindex="-1">2. 数组方式 <a class="header-anchor" href="#_2-数组方式" aria-label="Permalink to &quot;2. 数组方式&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">input</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;./src/scripts/base.js&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;./src/scripts/utils.js&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;./src/scripts/pages/*.js&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">input</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;./src/scripts/base.js&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;./src/scripts/utils.js&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;./src/scripts/pages/*.js&#39;</span></span>
<span class="line"><span style="color:#24292E;">  ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_3-对象方式" tabindex="-1">3. 对象方式 <a class="header-anchor" href="#_3-对象方式" aria-label="Permalink to &quot;3. 对象方式&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">input</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;comm/index&#39;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&#39;./src/scripts/base.js&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&#39;./src/scripts/utils.js&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;index&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;./src/scripts/index.js&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;pages&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;./src/scripts/pages/*.js&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">input</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;comm/index&#39;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&#39;./src/scripts/base.js&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&#39;./src/scripts/utils.js&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;index&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;./src/scripts/index.js&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;pages&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;./src/scripts/pages/*.js&#39;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>最后生成 3 个JS文件</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">dist/scripts/comm/index.js</span></span>
<span class="line"><span style="color:#e1e4e8;">dist/scripts/index.js</span></span>
<span class="line"><span style="color:#e1e4e8;">dist/scripts/pages.js</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">dist/scripts/comm/index.js</span></span>
<span class="line"><span style="color:#24292e;">dist/scripts/index.js</span></span>
<span class="line"><span style="color:#24292e;">dist/scripts/pages.js</span></span></code></pre></div><h2 id="babel-转译" tabindex="-1">babel 转译 <a class="header-anchor" href="#babel-转译" aria-label="Permalink to &quot;babel 转译&quot;">​</a></h2><p>如果开启 <code>babel</code> 转译，则使用 <code>webpack</code> 进行 Javascript 构建。</p><p>你可以通过修改项目中的 <code>babel.config.js</code> 文件来配置 babel 的转译选项。或者调整 <code>.browserslistrc</code> 修改支持的目标浏览器。</p><h2 id="terser" tabindex="-1">terser <a class="header-anchor" href="#terser" aria-label="Permalink to &quot;terser&quot;">​</a></h2><p>Javascript 文件是基于 <code>terser</code> 进行压缩混淆，配置项请点 <a href="./../config/build-options.html#build-jsminify">这里</a>。</p><p>具体配置可以查阅 <a href="https://github.com/terser/terser" target="_blank" rel="noreferrer">terser</a>。</p>`,19),o=[e];function c(t,r,i,E,d,y){return a(),n("div",null,o)}const b=s(l,[["render",c]]);export{u as __pageData,b as default};
